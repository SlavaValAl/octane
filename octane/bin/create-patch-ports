#!/usr/bin/python
import sys
import os
sys.path.append(os.path.normpath("{0}/../../helpers/".format(__file__)))
import transformations

def main():
    node_file = sys.argv[1]
    bridge_name = sys.argv[2]
    params = transformations.patch_port_params(node_file, bridge_name)
    for bridge_list, trunk_list in params:
        trunks = ",".join([str(t) for t in trunk_list])
        print("ovs-vsctl add-port {0} {0}--{1} "
              "-- set interface {0}--{1} type=patch "
              "options:peer={1}--{0}"
              .format(bridge_list[0], bridge_list[1]))
        print("ovs-vsctl add-port {1} {1}--{0} "
              "-- set interface {1}--{0} type=patch "
              "options:peer={0}--{1}"
              .format(bridge_list[0], bridge_list[1]))
 

if __name__ == '__main__':
    main()
